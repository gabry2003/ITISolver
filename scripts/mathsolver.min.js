!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(self,(function(){return(()=>{"use strict";var t={};function e(t){this.lettera=null,this.esponente=0,"string"==typeof t?e.interpreta(t,this):(this.lettera=t.lettera,this.esponente=t.esponente),this.toString=function(){return this.lettera?0!==this.esponente?1!==this.esponente?`${this.lettera}^${this.esponente}`:`${this.lettera}`:this.lettera:""}}function i(t){this.coefficiente=0,this.parteLetterale={},"string"==typeof t?i.interpreta(t,this):(this.coefficiente=t.coefficiente,this.parteLetterale=t.parteLetterale),this.toString=function(t=!1){let e;return 1==this.coefficiente?e=this.parteLetterale?`+${this.parteLetterale.toString()}`:"+1":-1==this.coefficiente?e=this.parteLetterale?`-${this.parteLetterale.toString()}`:"-1":(e=t?MathSolver.numeroRazionale(this.coefficiente):`${this.coefficiente}`,this.coefficiente>0&&(e=`+${e}`),this.parteLetterale&&(e+=this.parteLetterale.toString())),e},this.toStringWithoutPlus=function(){let t=this.toString();return"+"==t[0]?t.substring(1):t}}function n(t){switch(this.termini=[],this.membri=[],this.insiemePositivo=[],this.insiemeNegativo=[],this.parteFissa="y",typeof t){case"FunzioneOptions":this.termini=t.termini,this.membri=t.membri,this.parteFissa=t.parteFissa;break;case"string":n.interpreta(t,this);break;default:throw"Per favore passa un oggetto di tipo FunzioneOptions oppure una stringa!"}this.termineNoto=function(){for(let t=0;t<this.termini.length;t++)if(null==this.termini[t].parteLetterale)return this.termini[t].coefficiente;return 0},this.grado=function(){return Math.max(...this.termini.map((t=>t.parteLetterale?t.parteLetterale.esponente:0)))},this.getByExp=function(t){return this.termini.filter((e=>{if(e.parteLetterale)return e.parteLetterale.esponente==t}))[0]},this.ordina=function(){this.termini.sort(((t,e)=>(e.parteLetterale?e.parteLetterale.esponente:0)-(t.parteLetterale?t.parteLetterale.esponente:0)))},this.completa=function(){const t=this.grado();for(let e=t;e>0;e--)0==this.termini.filter((t=>{if(t.parteLetterale)return t.parteLetterale.esponente==e})).length&&this.termini.push(new i({coefficiente:0,parteLetterale:new ParteLetterale({lettera:"x",esponente:e})}));this.termini.length<t+1&&this.termini.push(new i({coefficiente:0,parteLetterale:new ParteLetterale({lettera:"x",esponente:0})})),this.ordina()},this.coefficienteAngolare=function(){if(1!==this.grado())return null;const t=this.getByExp(1).coefficiente;let e=Math.atan(t);return{numero:t,gradi:180*e/Math.PI,radianti:e,angoloAcuto:t>0,angoloRetto:0==t,angoloOttuso:t<0}},this.dominio=function(){return"(-\\infty,+\\infty)"},this.tipologia=function(){return"Funzione razionale intera"},this.primitiva=function(){let t="";const e=[];let i="F(x)=",o=i;this.termini.forEach(((e,o)=>{const s=e.parteLetterale?e.parteLetterale.toString():"x^0";o>0&&(i+=" ",t+=" ",e.coefficiente>=0&&(i+="+",t+="+"));let a=e.coefficiente;1==a?a="":-1==a&&(a="-");const r=s?`\\int ${s.replace("x^0","")} dx`:"";i+=`${a}`,i+=r;const l=new n(`y=${e.coefficiente}${s}`);l.termini[0].parteLetterale.esponente++,l.termini[0].coefficiente=e.coefficiente/l.termini[0].parteLetterale.esponente,t+=l.toString(!1)}));const s=new n(t);return o+=s.toString(),e.push(i),e.push(o),{func:s,passaggi:e}},this.toString=function(t=!1){let e;return this.termini.filter((t=>t)).forEach((i=>{e+=i.toString(t)})),"+"==e[0]&&(e=e.substring(1)),e.replace(/undefined/g,"").replace(/Nan/g,"")}}function o(t){this.letteraAttuale,this.puntiAttivi=[],this.puntiAsse=function(t){switch(t){case"x":return this.puntiAttivi.filter((t=>0==t.y));case"y":return this.puntiAttivi.filter((t=>0==t.x))}},this.aggiungiPunto=function(e,i,n){if(0==this.puntiAttivi.filter((t=>t.x==e&&t.y==i)).length){this.puntiAttivi.push({x:e,y:i});const n=this.letteraAttuale?String.fromCharCode(this.letteraAttuale.charCodeAt(this.letteraAttuale.length-1)+1):"A";this.letteraAttuale=n;let s=`${document.querySelector(t.elementi.listaPunti).innerHTML}<li style="list-style-type: none;">`;s+=this.toLatex(`${n}(${o.numeroRazionale(e)}, ${o.numeroRazionale(i)})`),s+="</li>",document.querySelector(t.elementi.listaPunti).innerHTML=s}},this.pulisciPunti=function(){document.querySelector(t.elementi.listaPunti).innerHTML="",this.letteraAttuale=null,this.puntiAttivi.length=0},this.togliRisultato=function(){console.log("bbb"),document.querySelector(t.elementi.risultato).style.display="none",document.querySelector(t.elementi.passaggiScomposizione).style.display="none",document.querySelector(t.elementi.equazioniRisolte).style.display="none",document.querySelector(t.elementi.passaggiScomposizione).innerHTML="",document.querySelector(t.elementi.equazioniRisolte).innerHTML="",pulisciPunti()},this.mostraRisultato=function(){document.querySelector(t.elementi.risultato).style.display="block"},this.disegnaFunzione=function(e,i){try{"string"==typeof e&&(e=[e]);let n=new URL(t.grafico.pagina,"https://prova.it/");n.searchParams.append("funzioni",JSON.stringify(e)),t.grafico.punti&&i&&n.searchParams.append("punti",JSON.stringify(i)),n=n.toString().replace("https://prova.it/",""),console.log("url",n),t.grafico.elemento.src=n}catch(t){console.error(t)}},this.toLatex=function(t,e=!0){return e?`\\[${t}\\]`:t},this.controllaParentesi=function(t){return(t=o.numeroRazionale(t))<0?`(${t})`:t.toString()},this.trovaDivisori=function(t,e=!0){t=Math.abs(t);let i=[];for(let e=1;e<=parseInt(Math.sqrt(t));e++)t%e==0&&(parseInt(t/e)==e?i.push(e):(i.push(e),i.push(parseInt(t/e))));return e&&(i=i.concat(i.map((t=>-t)))),i.sort(((t,e)=>t-e)),i},this.isZeroPolinomio=function(t,e){return 0==math.parse(e).evaluate({x:t})},this.scomponiConRuffini=function(t){let e=[],i="";t.ordina();const n=t.membri[0],o=t.termineNoto();let s,a=[],r=[],l=[o];0!==o&&(a=this.trovaDivisori(t.termineNoto())),l=l.concat(a),l=l.concat(t.termini[0].coefficiente),r=this.trovaDivisori(t.termini[0].coefficiente,!1),l=l.concat(r);for(let t in a)for(let e in r)l.push(t/e);for(let t of l)if(this.isZeroPolinomio(t,n)){s=t;break}if(null!=s){t.completa();let o="",a="",r=[],l=t.termini[0].coefficiente*s;for(let e=1;e<t.termini.length;e++)o+=`<td>${this.toLatex(l)}</td>`,l=t.termini[e].coefficiente+l,r.push(l),a+=`<td>${this.toLatex(l)}</td>`,l*=s;let c='<table class="table tabella-ruffini text-white">\n    <tbody>\n    <tr>\n        <td></td>';for(let e=0;e<t.termini.length;e++)c+=`<td>${this.toLatex(t.termini[e].coefficiente)}</td>`;c+=`</tr>\n        <tr>\n            <td>${this.toLatex(s)}</td>\n            <td></td>\n            ${o}\n        </tr>`,c+=`\n        <tr class="somme-ruffini">\n            <td></td>\n            <td>${this.toLatex(t.termini[0].coefficiente)}</td>\n            ${a}`,c+="\n        </tr>\n    </tbody>\n</table>",r=[t.termini[0].coefficiente].concat(r);let h=t.grado()-1,u="";for(let t=0;t<r.length-1;t++)0!==r[t]&&(-1==r[t]?u+=0!==h?"-":"-1":1==r[t]?t>0&&(u+=0!==h?"+":"+1"):(r[t]>0&&(u+="+"),u+=r[t]),0!==h&&(u+=1!==h?`x^${h}`:"x")),h--;e.push(u);let f="";s<0?(f=`\\frac {${n}} {x+${Math.abs(s)}}`,e.push(`x+${Math.abs(s)}`)):e.push(`x-${s}`);let p="";e.forEach((t=>{p+=`(${t})`})),i+=`<div class="col d-flex justify-content-center">\n    <div class="card bg-primary text-white mb-4">\n        <div class="card-header">${this.toLatex("\\text{Scomposizione con Ruffini}")}</div>\n        <div class="card-body">\n            ${this.toLatex("\\frac {"+n+"} {x-"+this.controllaParentesi(s)+"}"+(""!==f?" = "+f:" "))}\n        \n            <br>\n            ${c}\n            <br>\n            ${this.toLatex(p)}\n        </div>\n    </div>\n</div>`}return{equazione:e,scomposizione:i}},this.scomponi=function(t){return this.scomponiConRuffini(t)},this.risolviEquazioneGradiMaggiori=function(e,i,s,a=!0,r=!0){let l=[];r&&(document.querySelector(t.elementi.passaggiScomposizione).innerHTML="",document.querySelector(t.elementi.equazioniRisolte).innerHTML="");const c=this.scomponi(new n(e));""!==c.scomposizione&&(document.querySelector(t.elementi.passaggiScomposizione).innerHTML+=c.scomposizione);let h="",u="";if(a&&(u+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),u+=this.toLatex(e),a&&(u+=`${this.toLatex(s)}\n</td>`),c.equazione.length>0){l=[];let e=[];for(let i=0;i<c.equazione.length;i++){h+=`(${c.equazione[i]})`;const n=this.risolviEquazione(`${c.equazione[i]}=0`,null,s,!1,!1);document.querySelector(t.elementi.equazioniRisolte).innerHTML+=`<div class="col-md-6">\n    <div class="card bg-primary text-white mb-4">\n        <div class="card-header">${this.toLatex("\\text{Risoluzione equazione}")}</div>\n        <div class="card-body">\n            ${n.code}\n        </div>\n    </div>\n</div>`,l=l.concat(n.risultati),n.equazioneScomposta&&e.push(n.equazioneScomposta)}if(document.querySelector(t.elementi.passaggiScomposizione).style.display="block",document.querySelector(t.elementi.equazioniRisolte).style.display="flex",h+="=0",a&&(u+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),u+=this.toLatex(`${h}`),a&&(u+=`${this.toLatex(s)}\n</td>`),a){let t;c.equazione.length>0&&(t=`(${c.equazione[c.equazione.length-1]})`),e.forEach((e=>{e=`${e=e.split("=")[0]}${t}`,u+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">',u+=this.toLatex(`${e}=0`),u+=`${this.toLatex(s)}\n                </td>`,t=e}))}l=[...new Set(l)],l.sort(((t,e)=>t-e)),l.forEach(((t,e)=>{a&&(u+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),u+=this.toLatex("x_{"+(e+1)+"} = "+o.numeroRazionale(t)),a&&(u+=this.toLatex("y_{"+(e+1)+"} = 0")),a&&(u+="\n</td>")}))}else u+=a?`<td class="spazio-sistema"></td>\n            <td>${this.toLatex("\\text{Impossibile scomporre l'equazione}")}</td>`:this.toLatex("\\text{Impossibile scomporre l'equazione}");return{code:u,risultati:l,equazioneScomposta:h}},this.risolviEquazione=function(e,i,s,a=!0,r=!0){let l=new n(e.split("=")[0]),c="",h=[];switch(i=i||l.grado()){case 1:r&&(document.querySelector(t.elementi.passaggiScomposizione).style.display="none",document.querySelector(t.elementi.equazioniRisolte).style.display="none"),a&&(c+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),c+=this.toLatex(e),a&&(c+=`${this.toLatex(s)}\n</td>`);const n=l.termineNoto();if(0!==n){a&&(c+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),c+=this.toLatex(l.termini[0].toStringWithoutPlus()+" = "+o.numeroRazionale(-n)),a&&(c+=`${this.toLatex(s)}\n                </td>`);let t=o.numeroRazionale(Math.round(-n/l.termini[0].coefficiente*100,2)/100),e=s.split("=")[1];1!==l.termini[0].coefficiente&&(a&&(c+='<td class="spazio-sistema"></td>\n                    <td class="graffa-sistema">'),c+=this.toLatex("x = "+t),a&&(c+=`${this.toLatex(s)}\n                    </td>`)),this.aggiungiPunto(t,e),h=[t]}else a&&(c+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),c+=this.toLatex("x = 0"),a&&(c+=`${this.toLatex(s)}\n</td>`),this.aggiungiPunto(0,0);break;case 2:r&&(document.querySelector(t.elementi.passaggiScomposizione).style.display="none",document.querySelector(t.elementi.equazioniRisolte).style.display="none"),a&&(c+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),c+=this.toLatex(e),a&&(c+=`${this.toLatex(s)}\n</td>`);const u=l.getByExp(2),f=l.getByExp(1),p=l.termineNoto(),m=Math.pow(f?f.coefficiente:0,2)-4*u.coefficiente*p,d=Math.sqrt(m);if(h=[(-(f?f.coefficiente:0)-d)/2*u.coefficiente,(-(f?f.coefficiente:0)+d)/2*u.coefficiente],a&&(c+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),c+=this.toLatex("x = \\frac{-b \\pm \\sqrt{b^2-4ac}} {2a}"),a&&(c+=`${this.toLatex(s)}\n                </td>`),a&&(c+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),c+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm \\sqrt{${this.controllaParentesi(f?f.coefficiente:0)}^2-4*${this.controllaParentesi(u.coefficiente)}*${this.controllaParentesi(p)}}} {${this.controllaParentesi(2*u.coefficiente)}} = 0`),a&&(c+=`${this.toLatex(s)}\n                </td>`),a&&(c+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),c+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm \\sqrt{${o.numeroRazionale(m)}}} {${this.controllaParentesi(2*u.coefficiente)}}`),a&&(c+=`${this.toLatex(s)}\n                </td>`),m<0)a&&(c+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),c+=this.toLatex("\\text{eq. imp. in } \\mathbb{R}"),a&&(c+=`${this.toLatex(s)}\n            </td>`);else if(a&&(c+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),c+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm ${o.numeroRazionale(d)}} {${this.controllaParentesi(u.coefficiente)}}`),a&&(c+=`${this.toLatex(s)}\n            </td>`),0==m)a&&(c+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),c+=this.toLatex("x_{1,2} = \\pm"+o.numeroRazionale(Math.abs(h[0]))),a&&(c+=`${this.toLatex(s)}\n            </td>`),this.aggiungiPunto(h[0],0);else for(let t=0;t<2;t++)a&&(c+='<td class="spazio-sistema"></td>\n                        \n                        <td class="graffa-sistema">'),c+=this.toLatex("x_{"+(t+1)+"} = "+o.numeroRazionale(h[t])),a&&(c+=this.toLatex("y_{"+(t+1)+"} = 0")),a&&(c+="</td>"),this.aggiungiPunto(h[t],0);break;default:return this.risolviEquazioneGradiMaggiori(e,i,s,a,r)}return{code:c,risultati:h}},this.intersezioneAsse=function(t,e){const i={x:"y = 0",y:"x = 0"};let s=`<h5>${this.toLatex("\\text{Intersezione con l'asse "+e+"}")}</h5>\n<table tborder=0>\n    <tbody>\n        <tr>\n            \n            <td class="graffa-sistema">\n                ${this.toLatex(t)}\n                \n                ${this.toLatex(i[e])}\n            </td>`;if(t=new n(t),"y"==e){const n=t.termineNoto();s+=`<td class="spazio-sistema"></td>\n<td class="graffa-sistema">\n    ${this.toLatex("y = "+o.numeroRazionale(n))}\n    ${this.toLatex(i[e])}\n</td>`,this.aggiungiPunto(0,n)}else s+=this.risolviEquazione(`${t.membri[1]}=0`,t.grado(),i[e]).code;return s+="\n        </tr>\n    </tbody>\n<table>",s},this.funzionePariODispari=function(t){let e="";const i=t.membri[1];let o=new n(`y=${i}`);o.termini.forEach((t=>{t.coefficiente=-1*t.coefficiente})),o=o.toString(!1).replace("y=","");let s=new n(`y=${i}`);s.termini.filter((t=>t.parteLetterale&&t.parteLetterale.esponente%2==1)).forEach((t=>{t.coefficiente=-1*t.coefficiente})),s=s.toString(!1).replace("y=","");let a=this.toLatex(`-f(x) = -(${i})`);a+=this.toLatex(`-f(x) = ${o}`);let r=this.toLatex(`f(-x) = ${i.replace(/x/g,"(-x)")}`);r+=this.toLatex(`f(-x) = ${s}`),e+=r,e+="<hr>",e+=a,e+="<hr>";const l=s===i,c=s===o;return l?(e+=this.toLatex("\\text{La funzione è pari}"),e+=this.toLatex("\\text{f(-x)=f(x)}"),e+=this.toLatex(`${s} = ${i}`)):(e+=this.toLatex("\\text{La funzione non è pari}"),e+=this.toLatex("f(-x) \\neq f(x)"),e+=this.toLatex(`${s} \\neq ${i}`)),c?(e+=this.toLatex("\\text{La funzione è dispari}"),e+=this.toLatex("\\text{f(-x)=-f(x)}"),e+=this.toLatex(`${s} = ${o}`)):(e+=this.toLatex("\\text{La funzione non è dispari}"),e+=this.toLatex("f(-x) \\neq -f(x)"),e+=this.toLatex(`${s} \\neq ${o}`)),l||c||(e+=this.toLatex("\\text{La funzione non è né pari né dispari}")),e},this.positivitaENegativita=function(t){const e=[],i=[];let o=this.toLatex(`${t.membri[1]} > 0`);const s=this.scomponi(new n(`${t.membri[1]}=0`)).equazione,a=[];s.forEach((t=>{const e=new n(`${t}=0`);2==e.grado()?this.scomponi(e).equazione.forEach((t=>{a.push(t)})):a.push(t)}));const r=a.map((t=>`(${t})`)).join("");o+=this.toLatex(`${r} > 0`),o+="<hr>";const l=[];a.forEach((t=>{o+=this.toLatex(`${t}>0`);const e=new n(`${t}=0`);if(e.ordina(),1===e.grado()){const t=`${e.termini[0].toStringWithoutPlus()}>${-1*e.termineNoto()}`;l.push(t),o+=this.toLatex(t),o+="<hr>"}}));let c=l.map((t=>t.split(">")[1]));c.sort(((t,e)=>t-e)),o+=`<div class="table-responsive">\n          <table class="table tabella-disequazione">\n            <thead>\n              <tr class="d-flex">\n              <th scope="col" class="th-lg"></th>\n              ${c.map((t=>'<th scope="col" class="th-lg th-numero">'+this.toLatex(t)+"</th>")).join("")}\n              <th scope="col" class="th-lg"></th>\n              </tr>\n            </thead>\n            <tbody>`;const h=(t,e=!0,i=!1,n=!0,s=!0)=>{const a=t?"+":"-";o+="               <td",!i&&s&&(o+=` style="border-bottom: 2px ${t?"solid":"dotted"} #000;"`),e&&(o+=' class="td-border-left"'),o+=`>${i?'<span class="circle circle-'+(t?"positive":"negative")+'">':""}${n?i?a:this.toLatex(a):""}${i?"</span>":""}</td>`},u=c.map(((t,e)=>c.map(((t,i)=>i>=e))));u.forEach((t=>{o+='             <tr class="d-flex">',h(!1,!1),t.forEach((t=>h(t))),o+="             </tr>"})),o+='<tr class="d-flex"></tr>';const f=[Math.pow(-1,c.length)>0];for(let t=0;t<c.length;t++){let e=1;for(let i=0;i<u.length;i++)e*=u[i][t]?1:-1;f.push(e>0)}if(o+='             <tr class="d-flex">',f.forEach((t=>h(t,!1,!0))),o+="             </tr>",o+="            </tbody>\n    </table></div>",f.filter((t=>t)).length===f.length)e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];else if(f.filter((t=>!t)).length===f.length)i=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];else{let t,n;c=[Number.NEGATIVE_INFINITY,...c];for(let o=0;o<f.length;o++){const s=f[o],a=c[o],r=[null,void 0].includes(c[o+1])?Number.POSITIVE_INFINITY:c[o+1];s?(t?e[e.length-1][1]=a:e.push([a,r]),t=!0,n=!1):(n?i[i.length-1][1]=a:i.push([a,r]),t=!1,n=!0)}}function p(t){return 0==t.length?"\\emptyset":t.map((t=>{let e="";return Array.isArray(t)&&(e=t.filter((t=>t)).map((t=>t.toString().replace("-Infinity","-\\infty").replace("Infinity","+\\infty"))).join(";")),`(${e})`})).join("\\cup")}return t.insiemePositivo=e,t.insiemeNegativo=i,o+="<br>",o+=this.toLatex(`I.P.=${p(e)}`),o+=this.toLatex(`I.N.=${p(i)}`),o},this.areaFunzione=function(t,e){if(e.length<2)return this.toLatex("\\text{Impossibile trovare l'area!}");e.sort(((t,e)=>t.x-e.x));const i=t.membri[1],n=t.primitiva(),s=n.func,a=[...new Set(e.map((t=>t.x)))],r={};let l="";a.forEach((t=>{console.log("funzionePrimitiva",s);const e=s.toString(!1).replace("y=","");console.log("primitivaDaParsare",e);const i=math.parse(e).evaluate({x:t});r[t]=i;const n=o.numeroRazionale(t);l+=this.toLatex(`F(${n})=${s.toString().replace(/x/g,`(${n})`)}=${o.numeroRazionale(i)}`)}));let c="",h=0;const u=e.filter(((t,i)=>i!==e.length-1)).map(((t,i)=>{const n=t.x,s=e[i+1].x,a=o.numeroRazionale(n),l=o.numeroRazionale(s),u=r[s],f=r[n],p=u-f,m=Math.abs(p);c+=this.toLatex(`\\int_{${a}}^{${l}} f(x) dx = F(${l}) - F(${a}) = ${p<0?"\\lvert":""}${o.numeroRazionale(u)} - ${o.numeroRazionale(f)}${p<0?"\\rvert":""} = ${o.numeroRazionale(m)}`)+"\n";const d=`\\int_{${a}}^{${l}} f(x) dx`;return h+=m,{code:d,res:m}})),f=u.map((t=>{const e=o.numeroRazionale(t.res);return"-"===e[0]?`(${e})`:e})).join(" + ");let p="";return p+=this.toLatex(`f(x)=${i}`),p+=n.passaggi.map((t=>this.toLatex(t,!0))).join("\n"),p+=l,p+=c,p+="<hr>",p+=this.toLatex(`Area = \\int_{${o.numeroRazionale(e[0].x)}}^{${o.numeroRazionale(e[e.length-1].x)}} f(x) dx`),p+=this.toLatex("Area = "+u.map((t=>t.code)).join(" + ")),p+=this.toLatex("Area = "+f),p+=this.toLatex(`\\textbf{Area = } \\mathbf{${o.numeroRazionale(h)}}`),p}}return e.interpreta=function(t,i){if(null==t)return i&&(i=null),null;let n=t.split("^"),o=1,s=n[0];return n.length>1&&(o=parseFloat(n[1])),i?(i.lettera=s,i.esponente=o,i):new e({lettera:s,esponente:o})},window.ParteLetterale=e,i.interpreta=function(t,n){let o="",s="",a=!0;for(let e=0;e<t.length;e++)t[e].isAlpha()&&(a=!1),a?o+=t[e]:s+=t[e];switch(o){case"+":case"":o=1;break;case"-":o=-1;break;default:o=parseFloat(o)}return""==s&&(s=null),s=e.interpreta(s),n?(n.coefficiente=o,n.parteLetterale=s,n):new i({coefficiente:o,parteLetterale:s})},window.Termine=i,n.interpreta=function(t,e){const o=t.split("="),s=t.includes("x=")?"x":"y";t=(t=t.trim()).replace("x=","").replace("y=","");const a=MathSolver.splittaEspressione(t,["+","-"]).map((t=>i.interpreta(t)));return e?(e.membri=o,e.parteFissa=s,e.termini=a,e):new n({membri:o,parteFissa:s,termini:a})},window.Funzione=n,String.prototype.isAlpha=function(){return this.match("^[a-zA-Z()]+$")},o.splittaEspressione=function(t,e){let i=[],n="";for(let o=0;o<t.length;o++){const s=t[o];e.includes(t[o])&&0!=o?(i.push(n),n=`${s}`):n+=t[o],o==t.length-1&&i.push(n)}return i},o.numeroRazionale=function(t){if(null==t)return"1";const e=math.fraction(math.number(t));return 1!==e.d?`${t<0?"-":""}\\frac{${e.n.toString()}} {${e.d.toString()}}`:t},window.MathSolver=o,window.Grafico=function(t){if(null!=t&&null!=t||(t={}),t.font=t.font||"Poppins",null!=t.focus&&null!=t.focus||(t.focus=3),null==t.colori||null==t.colori?t.colori={assi:"#444444",punti:"#f400a1",puntiFunzione:"#4D4DFF",funzione:"#484848",testo:"#444444"}:(t.colori||(t.colori="#444444"),t.punti||(t.punti="#DD4B44"),t.puntiFunzione||(t.puntiFunzione="#4D4DFF"),t.funzione||(t.funzione="#484848"),t.testo||(t.testo="#444444")),null==t.assi||null==t.assi)t.assi=[{min:-20,max:20},{min:-20,max:20}];else for(let e=0;e<t.assi.length;e++)null==t.assi[e]||null==t.assi[e]?t.assi[e]={min:-20,max:20}:(null!=t.assi[e].min&&null!=t.assi[e].min||(t.assi[e].min=-20),null!=t.assi[e].max&&null!=t.assi[e].max||(t.assi[e].max=20));null==t.animazione||null==t.animazione?t.animazione={animazione:!1,loop:!1}:(null!=t.animazione&&null!=t.animazione||(t.animazione=!1),null!=t.loop&&null!=t.loop||(t.loop=!1)),this.xMin=t.assi[0].min,this.xMax=t.assi[0].max,this.yMin=t.assi[1].min,this.yMax=t.assi[1].max,this.indexLetteraAttuale=0,this.letteraAttuale,this._GET=new URLSearchParams(window.location.search),this.funzioni=JSON.parse(this._GET.get("funzioni")),this.punti=this._GET.get("punti"),this.punti&&(this.punti=JSON.parse(this.punti));let e=[],i=null,n=[],o=mathBox({plugins:["core","controls","cursor","mathbox","fullscreen"],controls:{klass:THREE.OrbitControls}});if(o.fallback)throw"WebGL not supported";o.three.renderer.setClearColor(new THREE.Color(16777215),1),o.camera({proxy:!0,position:[0,0,3]});let s=o.cartesian({range:[[this.xMin,this.xMax],[this.yMin,this.yMax]],scale:[3,1.5]});s.grid({width:1,divideX:40,divideY:20,opacity:.25}),o.set("focus",t.focus);let a=[];t.assi.forEach(((e,i)=>{a.push(s.axis({axis:i+1,width:3,detail:2*e.max,color:t.colori.assi}))})),console.log("funzioni",this.funzioni);let r=this.funzioni;i=s.interval({expr:function(t,e,i,n){r.forEach((i=>{const n=math.parse(i.trim().replace("y=","").replace("x=","")).evaluate({x:e});t(e,n)}))},width:64,channels:2,items:r.length}),s.line({width:4,color:t.colori.funzione}),s.point({size:5,color:t.colori.puntiFunzione}),s.ticks({width:5,size:15,color:t.colori.testo}),t.assi.forEach(((e,i)=>{const o=[[this.xMax,0],[0,this.yMax]],r=s.scale({axis:i+1,divide:e.max/2,nice:!0,zero:0==i}),l=s.ticks({width:5,size:15,color:t.colori.testo,zBias:2}),c=s.label({color:t.colori.testo,zIndex:1,offset:[[0,40],[40,0]][i],points:r,text:s.format({digits:2,font:t.font,weight:"bold",style:"normal",source:r})}),h=s.label({text:s.text({width:1,data:[["x","y"][i]],font:t.font,weight:"bold",style:"normal"}),points:s.array({width:1,channels:2,data:[o[i]]}),size:16,color:t.colori.testo,outline:0,background:"transparent",offset:[[25,0],[0,25]][i],zIndex:1});n.push({asse:a[i],scala:r,ticks:l,ticksLabel:c,label:h})})),console.log("assiGrafico",n),this.punti&&this.punti.forEach((i=>{const n=this.letteraAttuale?String.fromCharCode(this.letteraAttuale.charCodeAt(this.letteraAttuale.length-1)+1):"A";this.letteraAttuale=n,console.log(`${n}(${i.x}; ${i.y})`),e.push(s.label({text:s.text({width:1,data:[n],font:t.font,weight:"bold",style:"normal"}),points:s.array({width:1,channels:2,data:[[i.x,i.y]]}),size:30,color:i.foreground?i.foreground:t.colori.punti,outline:1,background:i.background?i.background:"transparent",offset:[10,10],zIndex:1})),this.indexLetteraAttuale++})),t.animazione.animazione&&o.play({target:"cartesian",pace:5,to:2,loop:t.animazione.loop,script:[{props:{range:[[-2,2],[-1,1]]}},{props:{range:[[-4,4],[-2,2]]}},{props:{range:[[-2,2],[-1,1]]}}]})},t.default})()}));