!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(self,(function(){return(()=>{"use strict";var t={};function e(t){switch(this.lettera=0,this.esponente={},typeof t){case"ParteLetteraleOptions":this.lettera=t.lettera,this.esponente=t.esponente;break;case"string":e.interpreta(t,this);break;default:throw"Per favore passa un oggetto di tipo ParteLetteraleOptions oppure una stringa!"}this.toString=function(){return 0!==this.esponente?1!==this.esponente?`${this.lettera}^${this.esponente}`:`${this.lettera}`:this.lettera}}function i(t){switch(this.coefficiente=0,this.parteLetterale={},typeof t){case"TermineOptions":this.coefficiente=t.coefficiente,this.parteLetterale=t.parteLetterale;break;case"string":i.interpreta(t,this);break;default:throw"Per favore passa un oggetto di tipo TermineOptions oppure una stringa!"}this.toString=function(){let t;return t=1==this.coefficiente?`+${this.parteLetterale.toString()}`:-1==this.coefficiente?`-${this.parteLetterale.toString()}`:numeroRazionale(this.coefficiente)+this.parteLetterale.toString(),t}}function n(t){switch(this.termini=[],this.membri=[],this.parteFissa="y",typeof t){case"FunzioneOptions":this.termini=t.termini,this.membri=t.membri,this.parteFissa=t.parteFissa;break;case"string":n.interpreta(t,this);break;default:throw"Per favore passa un oggetto di tipo FunzioneOptions oppure una stringa!"}this.termineNoto=function(){for(let t=0;t<this.termini.length;t++)if(null==this.termini[t].parteLetterale)return this.termini[t].coefficiente;return 0},this.grado=function(){return Math.max(...this.termini.map((t=>t.parteLetterale?t.parteLetterale.esponente:0)))},this.getByExp=function(t){return this.termini.filter((e=>{if(e.parteLetterale)return e.parteLetterale.esponente==t}))[0]},this.ordina=function(){this.termini.sort(((t,e)=>(e.parteLetterale?e.parteLetterale.esponente:0)-(t.parteLetterale?t.parteLetterale.esponente:0)))},this.completa=function(){const t=this.grado();for(let e=t;e>0;e--)0==this.termini.filter((t=>{if(t.parteLetterale)return t.parteLetterale.esponente==e})).length&&this.termini.push(new i({coefficiente:0,parteLetterale:new ParteLetterale({lettera:"x",esponente:e})}));this.termini.length<t+1&&this.termini.push(new i({coefficiente:0,parteLetterale:new ParteLetterale({lettera:"x",esponente:0})})),this.ordina()},this.toString=function(){let t;return this.termini.forEach((e=>{t+=e.toString()})),"+"==t[0]&&(t=t.substring(1)),t}}function s(t){this.letteraAttuale,this.puntiAttivi=[],this.aggiungiPunto=function(e,i,n){if(0==puntiAttivi.filter((t=>t.x==e&&t.y==i)).length){puntiAttivi.push({x:e,y:i});const n=this.letteraAttuale?String.fromCharCode(this.letteraAttuale.charCodeAt(this.letteraAttuale.length-1)+1):"A";this.letteraAttuale=n;let s=`${t.elementi.listaPunti.innerHTML}<li style="list-style-type: none;">`;s+=this.toLatex(`${n}(${this.numeroRazionale(e)}, ${this.numeroRazionale(i)})`),s+="</li>",t.elementi.listaPunti.innerHTML=s}},this.pulisciPunti=function(){t.elementi.listaPunti.innerHTML="",this.letteraAttuale=null,this.puntiAttivi.length=0},this.togliRisultato=function(){t.elementi.risultato.style.display="none",t.elementi.passaggiScomposizione.style.display="none",t.elementi.equazioniRisolte.style.display="none",t.elementi.passaggiScomposizione.innerHTML="",t.elementi.equazioniRisolte.innerHTML="",pulisciPunti()},this.mostraRisultato=function(){t.elementi.risultato.style.display="block"},this.disegnaFunzione=function(e,i){try{"string"==typeof e&&(e=[e]);let n=new URL(t.grafico.pagina);n.searchParams.append("funzioni",encodeURIComponent(JSON.stringify(e))),t.grafico.punti&&n.searchParams.append("punti",encodeURIComponent(JSON.stringify(i))),n=n.toString(),console.log("url",n),t.grafico.elemento.src=n}catch(t){console.error(t)}},this.toLatex=function(t,e=!0){let i=t;return e&&(i=`\\[${t}\\]`),i},this.numeroRazionale=function(t){return t},this.controllaParentesi=function(t){return(t=this.numeroRazionale(t))<0?`(${t})`:t.toString()},this.trovaDivisori=function(t,e=!0){t=Math.abs(t);let i=[];for(let e=1;e<=parseInt(Math.sqrt(t));e++)t%e==0&&(parseInt(t/e)==e?i.push(e):(i.push(e),i.push(parseInt(t/e))));return e&&(i=i.concat(i.map((t=>-t)))),i.sort(((t,e)=>t-e)),i},this.isZeroPolinomio=function(t,e){return 0==math.parse(e).evaluate({x:t})},this.scomponiConRuffini=function(t){let e=[],i="";t.ordina();const n=t.membri[0],s=t.termineNoto();let a,o=[],r=[],l=[s];for(divisore in 0!==s&&(o=this.trovaDivisori(t.termineNoto())),l=l.concat(o),l=l.concat(t.termini[0].coefficiente),r=this.trovaDivisori(t.termini[0].coefficiente,!1),l=l.concat(r),o)for(divisore2 in r)l.push(divisore/divisore2);for(let t of l)if(this.isZeroPolinomio(t,n)){a=t;break}if(null!=a){t.completa();let s="",o="",r=[],l=t.termini[0].coefficiente*a;for(let e=1;e<t.termini.length;e++)s+=`<td>${this.toLatex(l)}</td>`,l=t.termini[e].coefficiente+l,r.push(l),o+=`<td>${this.toLatex(l)}</td>`,l*=a;let c='<table class="table tabella-ruffini">\n    <tbody>\n    <tr>\n        <td></td>';for(let e=0;e<t.termini.length;e++)c+=`<td>${this.toLatex(t.termini[e].coefficiente)}</td>`;c+=`</tr>\n        <tr>\n            <td>${this.toLatex(a)}</td>\n            <td></td>\n            ${s}\n        </tr>`,c+=`\n        <tr class="somme-ruffini">\n            <td></td>\n            <td>${this.toLatex(t.termini[0].coefficiente)}</td>\n            ${o}`,c+="\n        </tr>\n    </tbody>\n</table>",r=[t.termini[0].coefficiente].concat(r);let h=t.grado()-1,f="";for(let t=0;t<r.length-1;t++)0!==r[t]&&(-1==r[t]?f+=0!==h?"-":"-1":1==r[t]?t>0&&(f+=0!==h?"+":"+1"):(r[t]>0&&(f+="+"),f+=r[t]),0!==h&&(f+=1!==h?`x^${h}`:"x")),h--;e.push(f);let u="";a<0?(u=`\\frac {${n}} {x+${Math.abs(a)}}`,e.push(`x+${Math.abs(a)}`)):e.push(`x-${a}`);let p="";e.forEach((t=>{p+=`(${t})`})),i+=`<div class="col d-flex justify-content-center">\n    <div class="card bg-dark text-white mb-4">\n        <div class="card-header">${this.toLatex("\\text{Scomposizione con Ruffini}")}</div>\n        <div class="card-body">\n            ${this.toLatex("\\frac {"+n+"} {x-"+this.controllaParentesi(a)+"}"+(""!==u?" = "+u:" "))}\n        \n            <br>\n            ${c}\n            <br>\n            ${this.toLatex(p)}\n        </div>\n    </div>\n</div>`}return{equazione:e,scomposizione:i}},this.scomponi=function(t){return this.scomponiConRuffini(t)},this.risolviEquazioneGradiMaggiori=function(e,i,s,a=!0,o=!0){let r=[];o&&(t.elementi.passaggiScomposizione.innerHTML="",t.elementi.equazioniRisolte.innerHTML="");const l=this.scomponi(new n(e));""!==l.scomposizione&&(t.elementi.passaggiScomposizione.innerHTML+=l.scomposizione);let c="",h="";if(a&&(h+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),h+=this.toLatex(e),a&&(h+=`${this.toLatex(s)}\n</td>`),l.equazione.length>0){t.elementi.passaggiScomposizione.style.css="block",t.elementi.equazioniRisolte.style.css="flex",r=[];let e=[];for(let i=0;i<l.equazione.length;i++){c+=`(${l.equazione[i]})`;const n=this.risolviEquazione(`${l.equazione[i]}=0`,null,s,!1,!1);t.elementi.equazioniRisolte.innerHTML+=`<div class="col-md-6">\n    <div class="card bg-dark text-white mb-4">\n        <div class="card-header">${this.toLatex("\\text{Risoluzione equazione}")}</div>\n        <div class="card-body">\n            ${n.code}\n        </div>\n    </div>\n</div>`,r=r.concat(n.risultati),n.equazioneScomposta&&e.push(n.equazioneScomposta)}if(t.elementi.passaggiScomposizione.style.css="block",t.elementi.equazioniRisolte.style.css="flex",c+="=0",a&&(h+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),h+=this.toLatex(`${c}`),a&&(h+=`${this.toLatex(s)}\n</td>`),a){let t;l.equazione.length>0&&(t=`(${l.equazione[l.equazione.length-1]})`),e.forEach((e=>{e=`${e=e.split("=")[0]}${t}`,h+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">',h+=this.toLatex(`${e}=0`),h+=`${this.toLatex(s)}\n                </td>`,t=e}))}r=[...new Set(r)],r.sort(((t,e)=>t-e)),r.forEach(((t,e)=>{a&&(h+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),h+=this.toLatex("x_{"+(e+1)+"} = "+this.numeroRazionale(t)),a&&(h+=this.toLatex("y_{"+(e+1)+"} = 0")),a&&(h+="\n</td>")}))}else h+=a?`<td class="spazio-sistema"></td>\n            <td>${this.toLatex("\\text{Impossibile scomporre l'equazione}")}</td>`:this.toLatex("\\text{Impossibile scomporre l'equazione}");return{code:h,risultati:r,equazioneScomposta:c}},this.risolviEquazione=function(e,i,s,a=!0,o=!0){let r=new n(e.split("=")[0]),l="",c=[];switch(i=i||r.grado()){case 1:t.elementi.passaggiScomposizione.style.css="none",t.elementi.equazioniRisolte.style.css="none",a&&(l+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),l+=this.toLatex(e),a&&(l+=`${this.toLatex(s)}\n</td>`);const n=r.termineNoto();if(0!==n){a&&(l+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),l+=this.toLatex(r.termini[0].toString()+" = "+this.numeroRazionale(-n)),a&&(l+=`${this.toLatex(s)}\n                </td>`);let t=this.numeroRazionale(Math.round(-n/r.termini[0].coefficiente*100,2)/100),e=s.split("=")[1];1!==r.termini[0].coefficiente&&(a&&(l+='<td class="spazio-sistema"></td>\n                    <td class="graffa-sistema">'),l+=this.toLatex("x = "+t),a&&(l+=`${this.toLatex(s)}\n                    </td>`)),this.aggiungiPunto(t,e),c=[t]}else a&&(l+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),l+=this.toLatex("x = 0"),a&&(l+=`${this.toLatex(s)}\n</td>`),this.aggiungiPunto(0,0);break;case 2:t.elementi.passaggiScomposizione.style.css="none",t.elementi.equazioniRisolte.style.css="none",a&&(l+='<td class="spazio-sistema"></td>\n<td class="graffa-sistema">'),l+=this.toLatex(e),a&&(l+=`${this.toLatex(s)}\n</td>`);const h=r.getByExp(2),f=r.getByExp(1),u=r.termineNoto(),p=Math.pow(f?f.coefficiente:0,2)-4*h.coefficiente*u,d=Math.sqrt(p);if(c=[(-(f?f.coefficiente:0)-d)/2*h.coefficiente,(-(f?f.coefficiente:0)+d)/2*h.coefficiente],a&&(l+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),l+=this.toLatex("x = \\frac{-b \\pm \\sqrt{b^2-4ac}} {2a}"),a&&(l+=`${this.toLatex(s)}\n                </td>`),a&&(l+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),l+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm \\sqrt{${this.controllaParentesi(f?f.coefficiente:0)}^2-4*${this.controllaParentesi(h.coefficiente)}*${this.controllaParentesi(u)}}} {${this.controllaParentesi(2*h.coefficiente)}} = 0`),a&&(l+=`${this.toLatex(s)}\n                </td>`),a&&(l+='<td class="spazio-sistema"></td>\n                <td class="graffa-sistema">'),l+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm \\sqrt{${this.numeroRazionale(p)}}} {${this.controllaParentesi(2*h.coefficiente)}}`),a&&(l+=`${this.toLatex(s)}\n                </td>`),p<0)a&&(l+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),l+=this.toLatex("\\text{eq. imp. in } \\mathbb{R}"),a&&(l+=`${this.toLatex(s)}\n            </td>`);else if(a&&(l+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),l+=this.toLatex(`x = \\frac{-${this.controllaParentesi(f?f.coefficiente:0)} \\pm ${this.numeroRazionale(d)}} {${this.controllaParentesi(h.coefficiente)}}`),a&&(l+=`${this.toLatex(s)}\n            </td>`),0==p)a&&(l+='<td class="spazio-sistema"></td>\n            \n            <td class="graffa-sistema">'),l+=this.toLatex("x_{1,2} = \\pm"+this.numeroRazionale(Math.abs(c[0]))),a&&(l+=`${this.toLatex(s)}\n            </td>`),this.aggiungiPunto(c[0],0);else for(let t=0;t<2;t++)a&&(l+='<td class="spazio-sistema"></td>\n                        \n                        <td class="graffa-sistema">'),l+=this.toLatex("x_{"+(t+1)+"} = "+this.numeroRazionale(c[t])),a&&(l+=this.toLatex("y_{"+(t+1)+"} = 0")),a&&(l+="</td>"),this.aggiungiPunto(c[t],0);break;default:return this.risolviEquazioneGradiMaggiori(e,i,s,a,o)}return{code:l,risultati:c}},this.intersezioneAsse=function(t,e){const i={x:"y = 0",y:"x = 0"};let s=`<h6>${this.toLatex("\\text{Intersezione con l'asse "+e+"}")}</h6>\n<table tborder=0>\n    <tbody>\n        <tr>\n            \n            <td class="graffa-sistema">\n                ${this.toLatex(t)}\n                \n                ${this.toLatex(i[e])}\n            </td>`;if(t=new n(t),"y"==e){const n=t.termineNoto();s+=`<td class="spazio-sistema"></td>\n<td class="graffa-sistema">\n    ${this.toLatex("y = "+this.numeroRazionale(n))}\n    ${this.toLatex(i[e])}\n</td>`,this.aggiungiPunto(0,n)}else s+=this.risolviEquazione(`${t.membri[1]}=0`,t.grado(),i[e]).code;return s+="\n        </tr>\n    </tbody>\n<table>",s}}return e.interpreta=function(t,i){if(null==t)return i&&(i=null),null;let n=t.split("^"),s=1,a=n[0];return n.length>1&&(s=parseFloat(n[1])),i?(i.lettera=a,i.esponente=s,i):new e({lettera:a,esponente:s})},window.ParteLetterale=e,i.interpreta=function(t,n){let s="",a="",o=!0;for(let e=0;e<t.length;e++)t[e].isAlpha()&&(o=!1),o?s+=t[e]:a+=t[e];switch(s){case"+":case"":s=1;break;case"-":s=-1;break;default:s=parseFloat(s)}return""==a&&(a=null),a=e.interpreta(a),n?(n.coefficiente=s,n.parteLetterale=a,n):new i({coefficiente:s,parteLetterale:a})},n.interpreta=function(t,e){const s=t.split("="),a=t.includes("x=")?"x":"y";t=(t=t.trim()).replace("x=","").replace("y=","");const o=MathSolver.splittaEspressione(t,["+","-"]).map(i.interpreta);return e?(e.membri=s,e.parteFissa=a,e.termini=o,e):new n({membri:s,parteFissa:a,termini:o})},window.Funzione=n,String.prototype.isAlpha=function(){return this.match("^[a-zA-Z()]+$")},s.splittaEspressione=function(t,e){let i=[],n="";for(let s=0;s<t.length;s++){const a=t[s];e.includes(t[s])&&0!=s?(i.push(n),n=`${a}`):n+=t[s],s==t.length-1&&i.push(n)}return i},window.MathSolver=s,window.Grafico=function(t){t.font=t.font||"Poppins",null!=t.focus&&null!=t.focus||(t.focus=3),null==t.colori||null==t.colori?t.colori={assi:"#444444",punti:"#4D4DFF",funzione:"#484848",testo:"#444444"}:(t.colori||(t.colori="#444444"),t.punti||(t.punti="#4D4DFF"),t.funzione||(t.funzione="#484848"),t.testo||(t.testo="#444444")),null==t.animazione||null==t.animazione?t.animazione={animazione:!1,loop:!1}:(null!=t.animazione&&null!=t.loop||(t.animazione=!1),null!=t.loop&&null!=t.loop||(t.loop=!1)),this.xMin=t.assi&&t.assi[0].min||-20,this.xMax=t.assi&&t.assi[0].max||20,this.yMin=t.assi&&t.assi[1].min||-20,this.yMax=t.assi&&t.assi[1].max||20,this.indexLetteraAttuale=0,this.letteraAttuale,this._GET=new URLSearchParams(window.location.search),this.funzioni=JSON.parse(_GET.get("funzioni")),this.espressioni=funzioni.map((t=>t.trim().replace("y=","").replace("x=",""))),this.punti=_GET.get("punti"),punti&&(punti=JSON.parse(punti));let e=mathBox({plugins:["core","controls","cursor","mathbox"],controls:{klass:THREE.OrbitControls}});if(e.fallback)throw"WebGL not supported";e.three.renderer.setClearColor(new THREE.Color(16777215),1),e.camera({proxy:!0,position:[0,0,3]});let i=e.cartesian({range:[[xMin,xMax],[yMin,yMax]],scale:[3,1.5]});i.axis({axis:1,width:3,detail:40,color:t.colori.assi}),i.axis({axis:2,width:3,detail:40,color:t.colori.assi}),i.grid({width:1,divideX:40,divideY:20,opacity:.25}),e.set("focus",t.camera),this.espressioni.forEach((t=>{const e=math.parse(t);i.interval({expr:function(t,i,n,s){t(i,e.evaluate({x:i}))},width:64,channels:2})})),i.line({width:5,color:t.colori.funzione}),i.point({size:6,color:t.colori.punti}),i.scale({divide:10}),i.ticks({width:5,size:15,color:t.colori.testo}),i.format({digits:2,weight:"bold"}),i.label({color:t.colori.testo,zIndex:1}),t.assi.forEach(((e,n)=>{const s=[[xMax,0],[0,yMax]];i.label({text:i.text({width:1,data:["x","y"][n],font:t.font,weight:"bold",style:"normal"}),points:i.array({width:1,channels:2,data:[s[n]]}),size:16,color:t.colori.testo,outline:1,background:t.colori.testo,offset:[[16,0],[16,0]][n],zIndex:1})})),punti&&punti.forEach((e=>{const n=letteraAttuale?String.fromCharCode(letteraAttuale.charCodeAt(letteraAttuale.length-1)+1):"A";letteraAttuale=n,i.label({text:i.text({width:1,data:[n],font:t.font,weight:"bold",style:"normal"}),points:i.array({width:1,channels:2,data:[[e.x,e.y]]}),size:18,color:t.colori.punti,outline:1,background:t.colori.punti,offset:[0,0],zIndex:1}),indexLetteraAttuale++})),t.animazione.animazione&&e.play({target:"cartesian",pace:5,to:2,loop:t.animazione.loop,script:[{props:{range:[[-2,2],[-1,1]]}},{props:{range:[[-4,4],[-2,2]]}},{props:{range:[[-2,2],[-1,1]]}}]})},t.default})()}));